version: "3.2"
# version: '3'
# services:
#   db:
#     # image: mariadb:10.5.9
#     image: postgres:latest

#     restart: always
#     ports:
#       - 5432:5432
#     volumes:
#       # - db-data:/var/lib/mysql
#       - "db-data:/var/lib/postgresql/data"
#     environment:
#       # MYSQL_ROOT_PASSWORD: password
#       POSTGRES_USER: postgres
#       POSTGRES_PASSWORD: postgres
#     env_file: .env
#     tty: true
#     stdin_open: true

volumes:
  db-data:

services:
  db:
    image: postgres:latest
    volumes:
      - "db-data:/var/lib/postgresql/"
    environment:
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: postgres
    ports:
      - "5432:5432"

  # rails:
  #   build:
  #     context: ./rails_app
  #     dockerfile: Dockerfile
  #   ports:
  #     - ${BACKEND_PORT}:3000
  #   volumes:
  #     - ./rails_app/:/rails_app
  #     - rails-bundle:/user/local/bundle
  #     - ./_roothome/:/root
  #   depends_on:
  #     - db
  #   env_file: .env
  #   tty: true
  #   stdin_open: true

  # 今回フロントで、phpmyadminは、使用しないのでコメントアウト
  # phpmyadmin:
  #   image: phpmyadmin/phpmyadmin
  #   environment:
  #     - PMA_HOST=${DB_HOST}
  #   ports:
  #     - 8888:80
  #   volumes:
  #     - pma-session:/sessions
  #   depends_on:
  #     - rails
  #   env_file: .env

volumes:
  # rails-bundle:
  db-data:
  # pma-session:
